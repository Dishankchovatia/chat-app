"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[149],{460:(n,e,a)=>{a.d(e,{A:()=>t});a(43);const t=a.p+"static/media/logo.0e93e38195291b3c742a5809c7f00ca5.svg"},741:(n,e,a)=>{a.r(e),a.d(e,{default:()=>R});var t,r=a(528),s=a(43),c=a(154),i=a(216),o=a(958),d=a(197),l=a(804),m=a(462),u=a(423),g=a(258),h=a(579);function f(n){let{handleSendMsg:e}=n;const[a,t]=(0,s.useState)(""),[r,c]=(0,s.useState)(!1);return(0,h.jsxs)(p,{children:[(0,h.jsx)("div",{className:"button-container",children:(0,h.jsxs)("div",{className:"emoji",children:[(0,h.jsx)(m.F2r,{onClick:()=>{c(!r)}}),r&&(0,h.jsx)(g.Ay,{onEmojiClick:(n,e)=>{let r=a;r+=n.emoji,t(r)}})]})}),(0,h.jsxs)("form",{className:"input-container",onSubmit:n=>(n=>{n.preventDefault(),a.length>0&&(e(a),t(""))})(n),children:[(0,h.jsx)("input",{type:"text",placeholder:"type your message here",onChange:n=>t(n.target.value),value:a}),(0,h.jsx)("button",{type:"submit",children:(0,h.jsx)(u.ylI,{})})]})]})}const p=d.Ay.div(t||(t=(0,r.A)(["\n  display: grid;\n  align-items: center;\n  grid-template-columns: 5% 95%;\n  background-color: #080420;\n  padding: 0 2rem;\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    padding: 0 1rem;\n    gap: 1rem;\n  }\n  .button-container {\n    display: flex;\n    align-items: center;\n    color: white;\n    gap: 1rem;\n    .emoji {\n      position: relative;\n      svg {\n        font-size: 1.5rem;\n        color: #ffff00c8;\n        cursor: pointer;\n      }\n      .EmojiPickerReact {\n        position: absolute;\n        top: -500px;\n        background-color: #080420;\n        box-shadow: 0 5px 10px #9a86f3;\n        border-color: #9a86f3;\n        .epr-body::-webkit-scrollbar {\n          background-color: #080420;\n          width: 5px;\n          &-thumb {\n            background-color: #9a86f3;\n          }\n        }\n        .epr-emoji-category-label {\n          background-color: #080420;\n        }\n\n        input {\n          background-color: transparent;\n          border-color: #9a86f3;\n        }\n        .epr-emoji-group:before {\n          background-color: #080420;\n        }\n      }\n    }\n  }\n  .input-container {\n    width: 100%;\n    border-radius: 2rem;\n    display: flex;\n    align-items: center;\n    gap: 2rem;\n    background-color: #ffffff34;\n    input {\n      width: 90%;\n      height: 60%;\n      background-color: transparent;\n      color: white;\n      border: none;\n      padding-left: 1rem;\n      font-size: 1.2rem;\n\n      &::selection {\n        background-color: #9a86f3;\n      }\n      &:focus {\n        outline: none;\n      }\n    }\n    button {\n      padding: 0.3rem 2rem;\n      border-radius: 2rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: #9a86f3;\n      border: none;\n      @media screen and (min-width: 720px) and (max-width: 1080px) {\n        padding: 0.3rem 1rem;\n        svg {\n          font-size: 1rem;\n        }\n      }\n      svg {\n        font-size: 2rem;\n        color: white;\n      }\n    }\n  }\n"])));var x,v=a(73),b=a(42);function j(){const n=(0,i.Zp)();return(0,h.jsx)(w,{onClick:async()=>{localStorage.clear(),n("./login")},children:(0,h.jsx)(b.ES$,{})})}const w=d.Ay.button(x||(x=(0,r.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.5rem;\n  border-radius: 0.5rem;\n  background-color: red;\n  border: none;\n  cursor: pointer;\n  svg {\n    font-size: 1.3rem;\n    color: #ebe7ff;\n  }\n"])));var y;const k=function(n){let{currentChat:e,socket:a}=n;const t=(0,s.useRef)(),[r,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(null);return(0,s.useEffect)((()=>{a.current&&a.current.on("msg-recieve",(n=>{d({fromSelf:!1,message:n})}))}),[]),(0,s.useEffect)((()=>{o&&i((n=>[...n,o]))}),[o]),(0,s.useEffect)((()=>{(async()=>{const n=await JSON.parse(localStorage.getItem("chat-app-current-user")),a=await c.A.post(l.C3,{from:n._id,to:e._id});i(a.data)})()}),[e]),(0,s.useEffect)((()=>{var n;null===(n=t.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),[r]),(0,h.jsxs)(S,{children:[(0,h.jsxs)("div",{className:"chat-header",children:[(0,h.jsxs)("div",{className:"user-details",children:[(0,h.jsx)("div",{className:"avatar",children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64,".concat(e.avatarImage),alt:""})}),(0,h.jsx)("div",{className:"username",children:(0,h.jsx)("h3",{children:e.username})})]}),(0,h.jsx)(j,{})]}),(0,h.jsx)("div",{className:"chat-messages",children:r.map((n=>(0,h.jsx)("div",{ref:t,children:(0,h.jsx)("div",{className:"message ".concat(n.fromSelf?"sended":"recieved"),children:(0,h.jsx)("div",{className:"content ",children:(0,h.jsx)("p",{children:n.message})})})},(0,v.A)())))}),(0,h.jsx)(f,{handleSendMsg:async n=>{const t=await JSON.parse(localStorage.getItem("chat-app-current-user"));a.current.emit("send-msg",{to:e._id,from:t._id,msg:n}),await c.A.post(l.$G,{from:t._id,to:e._id,message:n});const s=[...r];s.push({fromSelf:!0,message:n}),i(s)}})]})},S=d.Ay.div(y||(y=(0,r.A)(["\n  display: grid;\n  grid-template-rows: 10% 80% 10%;\n  gap: 0.1rem;\n  overflow: hidden;\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    grid-template-rows: 15% 70% 15%;\n  }\n  .chat-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 2rem;\n    .user-details {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n      .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n  }\n  .chat-messages {\n    padding: 1rem 2rem;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .message {\n      display: flex;\n      align-items: center;\n      .content {\n        max-width: 40%;\n        overflow-wrap: break-word;\n        padding: 1rem;\n        font-size: 1.1rem;\n        border-radius: 1rem;\n        color: #d1d1d1;\n        @media screen and (min-width: 720px) and (max-width: 1080px) {\n          max-width: 70%;\n        }\n      }\n    }\n    .sended {\n      justify-content: flex-end;\n      .content {\n        background-color: #4f04ff21;\n      }\n    }\n    .recieved {\n      justify-content: flex-start;\n      .content {\n        background-color: #9900ff20;\n      }\n    }\n  }\n"])));var N,A=a(460);function C(n){let{contacts:e,changeChat:a}=n;const[t,r]=(0,s.useState)(void 0),[c,i]=(0,s.useState)(void 0),[o,d]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{(async()=>{const n=await JSON.parse(localStorage.getItem("chat-app-current-user"));r(n.username),i(n.avatarImage)})()}),[]);return(0,h.jsx)(h.Fragment,{children:c&&c&&(0,h.jsxs)(E,{children:[(0,h.jsxs)("div",{className:"brand",children:[(0,h.jsx)("img",{src:A.A,alt:"logo"}),(0,h.jsx)("h3",{children:"chatx"})]}),(0,h.jsx)("div",{className:"contacts",children:e.map(((n,e)=>(0,h.jsxs)("div",{className:"contact ".concat(e===o?"selected":""),onClick:()=>((n,e)=>{d(n),a(e)})(e,n),children:[(0,h.jsx)("div",{className:"avatar",children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64,".concat(n.avatarImage),alt:""})}),(0,h.jsx)("div",{className:"username",children:(0,h.jsx)("h3",{children:n.username})})]},n._id)))}),(0,h.jsxs)("div",{className:"current-user",children:[(0,h.jsx)("div",{className:"avatar",children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64,".concat(c),alt:"avatar"})}),(0,h.jsx)("div",{className:"username",children:(0,h.jsx)("h2",{children:t})})]})]})})}const E=d.Ay.div(N||(N=(0,r.A)(["\n  display: grid;\n  grid-template-rows: 10% 75% 15%;\n  overflow: hidden;\n  background-color: #080420;\n  .brand {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    justify-content: center;\n    img {\n      height: 2rem;\n    }\n    h3 {\n      color: white;\n      text-transform: uppercase;\n    }\n  }\n  .contacts {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow: auto;\n    gap: 0.8rem;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .contact {\n      background-color: #ffffff34;\n      min-height: 5rem;\n      cursor: pointer;\n      width: 90%;\n      border-radius: 0.2rem;\n      padding: 0.4rem;\n      display: flex;\n      gap: 1rem;\n      align-items: center;\n      transition: 0.5s ease-in-out;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n      .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n    .selected {\n      background-color: #9a86f3;\n    }\n  }\n\n  .current-user {\n    background-color: #0d0d30;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 2rem;\n    .avatar {\n      img {\n        height: 4rem;\n        max-inline-size: 100%;\n      }\n    }\n    .username {\n      h2 {\n        color: white;\n      }\n    }\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      gap: 0.5rem;\n      .username {\n        h2 {\n          font-size: 1rem;\n        }\n      }\n    }\n  }\n"]))),I=a.p+"static/media/robot.0617a41936621e9697cd.gif";var _;function z(){const[n,e]=(0,s.useState)("");return(0,s.useEffect)((()=>{(async()=>{e(await JSON.parse(localStorage.getItem("chat-app-current-user")).username)})()}),[]),(0,h.jsxs)(O,{children:[(0,h.jsx)("img",{src:I,alt:""}),(0,h.jsxs)("h1",{children:["Welcome, ",(0,h.jsxs)("span",{children:[n,"!"]})]}),(0,h.jsx)("h3",{children:"Please select a chat to Start messaging."})]})}const O=d.Ay.div(_||(_=(0,r.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  flex-direction: column;\n  img {\n    height: 20rem;\n  }\n  span {\n    color: #4e0eff;\n  }\n"])));var J;function R(){const n=(0,i.Zp)(),e=(0,s.useRef)(),[a,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(void 0),[m,u]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{(async()=>{localStorage.getItem("chat-app-current-user")?u(await JSON.parse(localStorage.getItem("chat-app-current-user"))):n("/login")})()}),[localStorage]),(0,s.useEffect)((()=>{m&&(e.current=(0,o.io)(l.Hc),e.current.emit("add-user",m._id))}),[m]),(0,s.useEffect)((()=>{(async()=>{if(m)if(m.isAvatarImageSet){const n=await c.A.get("".concat(l.tO,"/").concat(m._id));t(n.data)}else n("/setAvatar")})()}),[m]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(F,{children:(0,h.jsxs)("div",{className:"container",children:[(0,h.jsx)(C,{contacts:a,changeChat:n=>{d(n)}}),void 0===r?(0,h.jsx)(z,{}):(0,h.jsx)(k,{currentChat:r,socket:e})]})})})}const F=d.Ay.div(J||(J=(0,r.A)(["\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1rem;\n  align-items: center;\n  background-color: #131324;\n  .container {\n    height: 85vh;\n    width: 85vw;\n    background-color: #00000076;\n    display: grid;\n    grid-template-columns: 25% 75%;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      grid-template-columns: 35% 65%;\n    }\n  }\n"])))},804:(n,e,a)=>{a.d(e,{$G:()=>i,C3:()=>o,Hc:()=>t,M5:()=>l,R6:()=>s,Uq:()=>m,VV:()=>r,ZL:()=>d,tO:()=>c});const t="http://localhost:5000",r="".concat(t,"/api/auth/login"),s="".concat(t,"/api/auth/register"),c=("".concat(t,"/api/auth/logout"),"".concat(t,"/api/auth/allusers")),i="".concat(t,"/api/messages/addmsg"),o="".concat(t,"/api/messages/getmsg"),d="".concat(t,"/api/auth/setavatar"),l="".concat(t,"/api/auth/checkusername"),m="".concat(t,"/api/auth/firebaselogin");"".concat(t,"/api/auth/setusername")}}]);
//# sourceMappingURL=149.549448c1.chunk.js.map