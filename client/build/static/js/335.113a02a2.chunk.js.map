{"version":3,"file":"static/js/335.113a02a2.chunk.js","mappings":"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","sources":["utils/Debounce.js","pages/SetUsername.jsx","utils/APIRoutes.js","utils/FirebaseConfig.js"],"sourcesContent":["export const debounce = (fn, timeout) => {\r\n  let timer;\r\n  return (...args) => {\r\n    clearTimeout(timer);\r\n    timer = setTimeout(() => {\r\n      fn.apply(this, args);\r\n    }, timeout);\r\n  };\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport styled from \"styled-components\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { checkUserNameRoute, registerRoute } from \"../utils/APIRoutes\";\r\nimport { debounce } from \"../utils/Debounce\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { firebaseAuth } from \"../utils/FirebaseConfig\";\r\n\r\nexport default function SetUsername() {\r\n  const navigate = useNavigate();\r\n  const [values, setValues] = useState(\"\");\r\n  const [label, setLabel] = useState(\"\");\r\n  const [usernameStatus, setUsernamStatus] = useState(undefined);\r\n  const [email, setEmail] = useState(undefined);\r\n\r\n  onAuthStateChanged(firebaseAuth, (userData) => {\r\n    if (!userData) {\r\n      navigate(\"/login\");\r\n    } else {\r\n      const userEmail =\r\n        userData.email ||\r\n        (userData.providerData[0] && userData.providerData[0].email);\r\n\r\n      if (userEmail) {\r\n        setEmail(userEmail);\r\n      } else {\r\n        // Handle the case when email is not available in userData\r\n        console.error(\"User email not found in userData:\", userData);\r\n        // You may choose to set a default email or display an error message\r\n      }\r\n    }\r\n  });\r\n\r\n  const toastOptions = {\r\n    position: \"bottom-right\",\r\n    autoClose: 8000,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    theme: \"dark\",\r\n  };\r\n  useEffect(() => {\r\n    if (localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY)) {\r\n      navigate(\"/\");\r\n    }\r\n  }, []);\r\n\r\n  const handleChange = debounce((name) => checkUsername(name), 300);\r\n\r\n  const validateForm = () => {\r\n    if (values.length < 3) {\r\n      toast.error(\r\n        \"username should be greater than 3 characters.\",\r\n        toastOptions\r\n      );\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const checkUsername = async (username) => {\r\n    if (username.length > 3) {\r\n      try {\r\n        const { data } = await axios.post(checkUserNameRoute, { username });\r\n        setUsernamStatus(data.status);\r\n        setLabel(data.msg);\r\n        setValues(username);\r\n      } catch (error) {\r\n        console.error(\"Axios error:\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (validateForm()) {\r\n      try {\r\n        const { data } = await axios.post(registerRoute, {\r\n          username: values,\r\n          email: email,\r\n          password: (Math.random() + 1).toString(20).substring(1),\r\n        });\r\n\r\n        console.log(\"Response Status:\", data.status);\r\n\r\n        if (data.status === false) {\r\n          toast.error(data.msg, toastOptions);\r\n        }\r\n        if (data.status === true) {\r\n          localStorage.setItem(\r\n            process.env.REACT_APP_LOCALHOST_KEY,\r\n            JSON.stringify(data.user)\r\n          );\r\n          navigate(\"/\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Axios error in handleSubmit:\", error.response.data);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <FormContainer>\r\n        {\r\n          <form action=\"\" onSubmit={(event) => handleSubmit(event)}>\r\n            <span>Check Username Availablity</span>\r\n            <div className=\"row\">\r\n              <input\r\n                className={`${\r\n                  usernameStatus\r\n                    ? \"success\"\r\n                    : usernameStatus !== undefined\r\n                    ? \"danger\"\r\n                    : \"\"\r\n                }`}\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n                name=\"username\"\r\n                onChange={(e) => handleChange(e.target.value)}\r\n                min=\"3\"\r\n              />\r\n              <label\r\n                htmlFor=\"\"\r\n                className={`${\r\n                  usernameStatus\r\n                    ? \"success\"\r\n                    : usernameStatus !== undefined\r\n                    ? \"danger\"\r\n                    : \"\"\r\n                }`}\r\n              >\r\n                {label}\r\n              </label>\r\n            </div>\r\n            <button type=\"submit\" className=\"btn\">\r\n              Create User\r\n            </button>\r\n          </form>\r\n        }\r\n      </FormContainer>\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n}\r\n\r\nconst FormContainer = styled.div`\r\n  height: 100vh;\r\n  width: 100vw;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  align-items: center;\r\n  background-color: #131324;\r\n  .row {\r\n    label {\r\n      display: block;\r\n      margin: 10px 0 0 5px;\r\n      transition: 0.3s ease-in-out;\r\n      height: 0.5rem;\r\n    }\r\n    label.success {\r\n      color: #39ff14;\r\n    }\r\n    label.danger {\r\n      color: #ff3131;\r\n    }\r\n  }\r\n  form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 2rem;\r\n    background-color: #00000076;\r\n    border-radius: 2rem;\r\n    padding: 5rem;\r\n  }\r\n\r\n  input {\r\n    background-color: transparent;\r\n    padding: 1rem;\r\n    border: 0.1rem solid #4e0eff;\r\n    border-radius: 0.4rem;\r\n    color: white;\r\n    width: 100%;\r\n    font-size: 1rem;\r\n    transition: 0.3s ease-in-out;\r\n    &:focus {\r\n      border: 0.1rem solid #997af0;\r\n      outline: none;\r\n    }\r\n  }\r\n  .success {\r\n    border-color: #39ff14;\r\n    &:focus {\r\n      border-color: #39ff14;\r\n    }\r\n  }\r\n  .danger {\r\n    border-color: #ff3131;\r\n    &:focus {\r\n      border-color: #ff3131;\r\n    }\r\n  }\r\n  .btn {\r\n    background-color: #4e0eff;\r\n    color: white;\r\n    padding: 1rem 2rem;\r\n    border: none;\r\n    font-weight: bold;\r\n    cursor: pointer;\r\n    border-radius: 0.4rem;\r\n    font-size: 1rem;\r\n    text-transform: uppercase;\r\n    &:hover {\r\n      background-color: #4e0eff;\r\n    }\r\n  }\r\n\r\n  span {\r\n    color: white;\r\n    text-transform: uppercase;\r\n  }\r\n`;\r\n","export const host = \"http://localhost:5000\";\r\nexport const loginRoute = `${host}/api/auth/login`;\r\nexport const registerRoute = `${host}/api/auth/register`;\r\nexport const logoutRoute = `${host}/api/auth/logout`;\r\nexport const allUsersRoute = `${host}/api/auth/allusers`;\r\nexport const sendMessageRoute = `${host}/api/messages/addmsg`;\r\nexport const recieveMessageRoute = `${host}/api/messages/getmsg`;\r\nexport const setAvatarRoute = `${host}/api/auth/setavatar`;\r\nexport const checkUserNameRoute = `${host}/api/auth/checkusername`;\r\nexport const firebaseLoginRoute = `${host}/api/auth/firebaselogin`;\r\nexport const setuserName = `${host}/api/auth/setusername`;","import { getAuth } from \"firebase/auth\";\r\nimport { initializeApp } from \"firebase/app\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCPqcIIgRUX1yR-sLX--SQUyVwSgSgoRw0\",\r\n  authDomain: \"chat-app-2f1a9.firebaseapp.com\",\r\n  projectId: \"chat-app-2f1a9\",\r\n  storageBucket: \"chat-app-2f1a9.appspot.com\",\r\n  messagingSenderId: \"412118110816\",\r\n  appId: \"1:412118110816:web:1481973521be192105a905\",\r\n  measurementId: \"G-896SJRP6EX\",\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nexport const firebaseAuth = getAuth(app);\r\n"],"names":["debounce","fn","timeout","timer","_len","arguments","length","args","Array","_key","clearTimeout","setTimeout","apply","SetUsername","navigate","useNavigate","values","setValues","useState","label","setLabel","usernameStatus","setUsernamStatus","undefined","email","setEmail","onAuthStateChanged","firebaseAuth","userData","userEmail","providerData","console","error","toastOptions","position","autoClose","pauseOnHover","draggable","theme","useEffect","localStorage","getItem","process","handleChange","name","checkUsername","async","username","data","axios","post","checkUserNameRoute","status","msg","handleSubmit","event","preventDefault","toast","registerRoute","password","Math","random","toString","substring","log","setItem","JSON","stringify","user","response","_jsxs","_Fragment","children","_jsx","FormContainer","action","onSubmit","className","concat","type","placeholder","onChange","e","target","value","min","htmlFor","ToastContainer","styled","div","_templateObject","_taggedTemplateLiteral","host","loginRoute","allUsersRoute","sendMessageRoute","recieveMessageRoute","setAvatarRoute","firebaseLoginRoute","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getAuth"],"sourceRoot":""}